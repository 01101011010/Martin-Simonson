<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martin Simonson - Portfolio</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preload" as="image" href="https://res.cloudinary.com/dzef5s7pq/image/upload/f_auto,q_auto,w_1920/v1758389151/Journey_bp28bm.jpg">
    <link rel="preload" as="image" href="https://res.cloudinary.com/dzef5s7pq/image/upload/w_1920,q_auto,f_auto/v1758389155/Stream_fo2u2x.jpg">
    <link rel="preload" as="image" href="https://res.cloudinary.com/dzef5s7pq/image/upload/w_1920,q_auto,f_auto/v1758389149/Ice_rnvvk1.jpg">
    <link rel="preload" as="image" href="https://res.cloudinary.com/dzef5s7pq/image/upload/v1758985648/Journey_rwtogk.jpg">
    <link rel="preload" as="image" href="https://res.cloudinary.com/dzef5s7pq/image/upload/v1758985867/Stream_vvrse3.jpg">
    <link rel="preload" as="image" href="https://res.cloudinary.com/dzef5s7pq/image/upload/v1758985790/Ice_ogqlc4.jpg">    <!-- Custom Styles -->

    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body class="bg-black text-gray-200 transition-colors duration-300">

    <!-- Header & Navigation -->
    <header class="bg-black/80 backdrop-blur-md shadow-lg sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div>
                <a href="#" id="nav-logo" class="text-2xl font-bold text-gray-100">Martin Simonson</a>
            </div>

            <div class="hidden md:flex items-center space-x-8">
                <a href="#about" id="nav-about" class="text-gray-400 hover:text-white transition duration-300 underline decoration-transparent hover:decoration-[#A78BFA] decoration-2 underline-offset-4">About</a>
                <a href="#books" id="nav-books" class="text-gray-400 hover:text-white transition duration-300 underline decoration-transparent hover:decoration-[#A78BFA] decoration-2 underline-offset-4">Books</a>
                <a href="#talks" id="nav-talks" class="text-gray-400 hover:text-white transition duration-300 underline decoration-transparent hover:decoration-[#A78BFA] decoration-2 underline-offset-4">Talks</a>
                <a href="#news" id="nav-news" class="text-gray-400 hover:text-white transition duration-300 underline decoration-transparent hover:decoration-[#A78BFA] decoration-2 underline-offset-4">News</a>
                <a href="#contact" id="nav-contact" class="text-gray-400 hover:text-white transition duration-300 underline decoration-transparent hover:decoration-[#A78BFA] decoration-2 underline-offset-4">Contact</a>
                <div class="flex items-center space-x-2 border-l pl-8">
                    <button id="lang-en" class="text-gray-400 hover:text-white transition duration-300 lang-active">EN</button>
                    <span class="text-gray-700">/</span>
                    <button id="lang-es" class="text-gray-400 hover:text-white transition duration-300">ES</button>
                </div>
            </div>
    
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-white focus:outline-none">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden fixed inset-0 bg-black z-40 flex flex-col items-center justify-center text-center h-screen overflow-y">
            <button id="mobile-menu-close-button" class="absolute top-4 right-6 text-white focus:outline-none">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>

            <a href="#hero" class="block py-4 text-2xl text-gray-300 hover:text-white">Home</a>
            <a href="#about" class="block py-4 text-2xl text-gray-300 hover:text-white">About</a>
            <a href="#books" class="block py-4 text-2xl text-gray-300 hover:text-white">Books</a>
            <a href="#talks" class="block py-4 text-2xl text-gray-300 hover:text-white">Talks</a>
            <a href="#news" class="block py-4 text-2xl text-gray-300 hover:text-white">News</a>
            <a href="#contact" class="block py-4 text-2xl text-gray-300 hover:text-white">Contact</a>
            <div class="mt-8 pt-8 border-t border-gray-700 w-1/2">
                <div class="flex items-center justify-center space-x-4">
                    <button id="lang-en-mobile" class="text-2xl text-gray-400 hover:text-white transition duration-300">EN</button>
                    <span class="text-2xl text-gray-700">/</span>
                    <button id="lang-es-mobile" class="text-2xl text-gray-400 hover:text-white transition duration-300">ES</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section id = "hero" class="text-center min-h-screen flex items-center justify-center px-6">
            <div class="container mx-auto px-6">
                <h1 id="hero-title" class="text-5xl md:text-7xl font-bold text-gray-100 leading-tight mb-4">Martin Simonson</h1>
                <p id="hero-subtitle" class="text-base md:text-lg text-gray-400 max-w-2xl mx-auto">Writer, public speaker, academic and translator exploring the borderland between the culture, nature and virtual reality.</p>
            </div>
        </section>

         <!-- About Section -->
        <section id="about" class="bg-black min-h-screen flex items-center justify-center px-6 animated-section">
            <div class="container mx-auto px-6 section-content">
                 <h2 id="about-title" class="text-2xl md:text-3xl font-bold text-center text-gray-100 mb-12">About Me</h2>
                <div class="flex flex-col md:flex-row items-center max-w-4xl mx-auto">
                    <div class="md:w-1/3 mb-8 md:mb-0">
                        <img src="https://res.cloudinary.com/dzef5s7pq/image/upload/v1758469585/martin_jhvd24.jpg" alt="Portrait of Martin Simonson" class="rounded-lg shadow-lg mx-auto w-2/3 md:w-full">
                    </div>
                    <div class="md:w-2/3 md:pl-12 text-center md:text-left">
                        <p id="about-summary" class="text-gray-400 leading-relaxed mb-4"></p>
                        <a href="#" id="read-more-btn" class="text-indigo-600 hover:underline font-semibold mt-4 inline-block"></a>
                    </div>
                </div>
            </div>
        </section>
        <!-- Books Section-->
        <section id="books" class="min-h-screen flex items-center justify-center px-6 animated-section">
            <div class="container mx-auto px-6 max-w-5xl section-content">
                <h2 id="books-title" class="text-2xl md:text-3xl font-bold text-center text-gray-100 mb-16">Books</h2>
                <div class="flex justify-end items-center space-x-2 mb-8 text-sm">
                    <button id="expand-all-btn" class="text-[#A78BFA] hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Expand All</button>
                    <span class="text-gray-600">/</span>
                    <button id="collapse-all-btn" class="text-[#A78BFA] hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">Collapse All</button>
                </div>

                <div class="space-y-4">
                    <div class="border-b border-white">
                        <button class="group accordion-toggle w-full flex justify-between items-center text-left py-4">
                            <h3 id="category-fiction" class="text-xl text-2xl font-semibold text-white">Fiction</h3>
                            <svg class="w-6 h-6 transform transition-transform duration-300 group-hover:stroke-[#A78BFA]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-panel hidden pb-8 pt-4">
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                                <div>
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden sm:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden md:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden lg:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                </div>
                        </div>
                    </div>

                    <div class="border-b border-white">
                        <button class="group accordion-toggle w-full flex justify-between items-center text-left py-4">
                            <h3 id="category-essays" class="text-xl text-2xl font-semibold text-white">Essays</h3>
                            <svg class="w-6 h-6 transform transition-transform duration-300 group-hover:stroke-[#A78BFA]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-panel hidden pb-8 pt-4">
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                                <div>
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden sm:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden md:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden lg:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                </div>
                        </div>
                    </div>

                    <div class="border-b border-white">
                        <button class="group accordion-toggle w-full flex justify-between items-center text-left py-4">
                            <h3 id="category-anthologies" class="text-xl text-2xl font-semibold text-white">Anthologies and critical editions</h3>
                            <svg class="w-6 h-6 transform transition-transform duration-300 group-hover:stroke-[#A78BFA]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-panel hidden pb-8 pt-4">
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                                <div>
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden sm:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden md:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden lg:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                </div>
                        </div>
                    </div>
        
                    <div class="border-b border-white">
                        <button class="group accordion-toggle w-full flex justify-between items-center text-left py-4">
                            <h3 id="category-translations" class="text-xl text-2xl font-semibold text-white">Translations</h3>
                            <svg class="w-6 h-6 transform transition-transform duration-300 group-hover:stroke-[#A78BFA]" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-panel hidden pb-8 pt-4">
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                                <div>
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden sm:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden md:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                <div class="hidden lg:block">
                                    <div class="skeleton skeleton-book"></div>
                                    <div class="skeleton skeleton-title"></div>
                                    <div class="skeleton skeleton-text"></div>
                                </div>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Talks and Interviews Section -->
        <section id="talks" class="bg-black min-h-screen flex items-center justify-center px-6 animated-section">
            <div class="container mx-auto px-6 max-w-3xl section-content">
                <h2 id="talks-title" class="text-2xl md:text-3xl font-bold text-center text-gray-100 mb-12">Talks & Interviews</h2>
                <div class="flex justify-end items-center space-x-2 mb-8 text-sm">
                    <button id="show-all-talks" class="text-[#A78BFA] hover:text-white transition-colors">Show all talks</button>
                    <span class="text-gray-600">/</span>
                    <button id="collapse-all-talks" class="text-[#A78BFA] hover:text-white transition-colors">Collapse talks</button>
                </div>
                <div class="space-y-8">
                    <div>
                        <div class="skeleton" style="height: 1.75rem; width: 70%; margin-bottom: 1rem;"></div>
                        <div class="skeleton" style="height: 1rem; width: 50%; margin-bottom: 0.75rem;"></div>
                        <div class="skeleton" style="height: 1rem; width: 90%;"></div>
                    </div>
                    <div class="hidden sm:block">
                        <div class="skeleton" style="height: 1.75rem; width: 65%; margin-bottom: 1rem;"></div>
                        <div class="skeleton" style="height: 1rem; width: 45%; margin-bottom: 0.75rem;"></div>
                        <div class="skeleton" style="height: 1rem; width: 85%;"></div>
                    </div>
                    </div>
            </div>
        </section>

        <!--News Section-->

        <section id="news" class="min-h-screen flex items-center justify-center px-6 animated-section">
            <div class="container mx-auto px-6 max-w-3xl section-content">
                <h2 id="news-title" class="text-2xl md:text-3xl font-bold text-center text-gray-100 mb-12">Latest News Posts</h2>
                <div class="flex justify-end items-center space-x-2 mb-8 text-sm">
                    <button id="show-all-news" class="text-[#A78BFA] hover:text-white transition-colors">Show all news</button>
                    <span class="text-gray-600">/</span>
                    <button id="collapse-all-news" class="text-[#A78BFA] hover:text-white transition-colors">Collapse news</button>
                </div>
                <div class="space-y-8">
                    <div>
                        <div class="skeleton" style="height: 1.75rem; width: 70%; margin-bottom: 1rem;"></div>
                        <div class="skeleton" style="height: 1rem; width: 90%;"></div>
                    </div>
                    <div class="hidden sm:block">
                        <div class="skeleton" style="height: 1.75rem; width: 65%; margin-bottom: 1rem;"></div>
                        <div class="skeleton" style="height: 1rem; width: 85%;"></div>
                    </div>
                    </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer id="contact" class="bg-gray-800 text-white py-16">
        <div class="container mx-auto px-6 max-w-xl">
            <h2 id="contact-title" class="text-2xl md:text-3xl font-bold text-center mb-8">Get In Touch</h2>
            <p id="contact-p" class="text-gray-400 mb-8 text-center">
                Have a question or want to work together? Fill out the form below and I'll get back to you.
            </p>

            <form action="https://formsubmit.co/el/rimofa" method="POST" class="space-y-6">
            
                <div>
                    <label for="email" id="contact-label-email" class="block text-sm font-medium text-gray-300">Your Email</label>
                    <input type="email" name="email" id="email" required 
                        class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
            
                <div>
                    <label for="name" id="contact-label-name" class="block text-sm font-medium text-gray-300">Your Name</label>
                    <input type="text" name="name" id="name" required
                        class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                </div>
            
                <div>
                    <label for="message" id="contact-label-message" class="block text-sm font-medium text-gray-300">Message</label>
                    <textarea id="message" name="message" rows="4" required
                            class="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                </div>
            
                <input type="hidden" name="_next" value="https://01101011010.github.io/Martin-Simonson/thank-you.html">

                <div class="text-center">
                    <button type="submit" id="contact-button-submit"
                            class="bg-indigo-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-indigo-700 transition duration-300 inline-block">
                        Send Message
                    </button>
                </div>
            </form>

            <p id="footer-copy" class="text-gray-400 mt-12 text-center text-sm">&copy; 2025 Martin Simonson. All rights reserved.</p>
        </div>
    </footer>

    <!-- Book Modal -->
    <div id="book-modal" 
        class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300">
  
    <div id="modal-content" 
       class="bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl h-auto max-h-screen flex flex-col overflow-y-auto relative transform scale-95 transition-transform duration-300">
    
        <button id="modal-close" 
            class="absolute top-2 right-4 text-gray-400 hover:text-gray-100 z-10 text-4xl font-light">&times;</button>

        <div class="flex flex-col items-center p-6 md:p-8 w-full">
      
        <!-- Cover image -->
            <div class="mb-6 flex justify-center w-full">
                <img id="modal-img" 
                    src="" 
                    alt="Book cover" 
                    class="rounded-xl shadow-lg">
            </div>

      <!-- Text content -->
            <div class="w-full">
                <h2 id="modal-title" class="text-2xl md:text-3xl font-bold mb-2 text-white"></h2>
        
            <div id="modal-availability" class="text-md text-gray-400 mb-2">
                <span id="modal-available-label" class="font-semibold text-gray-300"></span>
                <span id="modal-available-langs"></span>
            </div>
        
            <div id="modal-year-info" class="text-md text-gray-400 mb-4">
                <span id="modal-year-label" class="font-semibold text-gray-300"></span>
                <span id="modal-year"></span>
            </div>
        
            <h4 id="modal-desc-title" class="text-lg font-semibold text-gray-300 mb-2 border-b border-gray-700 pb-2"></h4>
        
        <!-- Synopsis flows naturally -->
            <div class="pr-2">
                <p id="modal-desc" class="text-gray-400 leading-relaxed text-sm md:text-base"></p>
            </div>
        
            <div class="pt-6 text-center md:text-left">
                <a id="modal-link" href="#" target="_blank" rel="noopener noreferrer" 
                    class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition duration-300 inline-block"></a>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- About Me Modal-->

    <div id="about-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300">
        <div id="about-modal-content" class="bg-gray-800 rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col overflow-hidden relative transform scale-95 transition-transform duration-300">
            <button id="about-modal-close" class="absolute top-2 right-4 text-gray-400 hover:text-white z-10 text-4xl font-light">&times;</button>
            <div class="p-8 md:p-10 flex-1 flex flex-col overflow-y-auto">
                <h2 class="text-3xl font-bold mb-6 text-white">About Martin</h2>
                <div class="space-y-4 text-gray-400 leading-relaxed pr-2">
                    <p id="about-full-p1"></p>
                    <p id="about-full-p2"></p>
                    <p id="about-full-p3"></p>
                    <p id="about-full-p4"></p>
                </div>
            </div>
        </div>
    </div>

    <div id="news-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden transition-opacity duration-300">
        <div id="news-modal-content" class="bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden relative transform scale-95 transition-transform duration-300">
            <button id="news-modal-close" class="absolute top-2 right-4 text-gray-400 hover:text-white z-10 text-4xl font-light">&times;</button>
            <div class="flex-1 overflow-y-auto p-8">
                <div class="mb-6">
                    <img id="news-modal-img" src="" alt="News image" class="w-full h-80 object-contain rounded-lg shadow-lg">
                </div>
                <div>
                    <p id="news-modal-date" class="text-sm text-gray-500 mb-2"></p>
                    <h2 id="news-modal-title" class="text-2xl md:text-3xl font-bold mb-4 text-white"></h2>
                    <div id="news-modal-desc" class="text-gray-400 leading-relaxed"></div>
                
                    <div class="pt-6">
                        <a id="news-modal-link" href="#" target="_blank" rel="noopener noreferrer" 
                        class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-700 transition duration-300 inline-block">
                            </a>
                    </div>
                
                </div>
            </div>
        </div>
    </div>

    <!-- The Connector Script - loads data from Google Sheets -->
    <script src="google_sheets_connector.js"></script>
    
    <!-- Main Page Script -->
    <script>
        const translations = {
            en: { 'nav-about': 'About', 'nav-books': 'Books', 'nav-talks': 'Talks', 'nav-news': 'News', 'nav-contact': 'Contact', 'hero-subtitle': 'Writer, public speaker, academic and translator exploring the borderland between the culture, nature and virtual reality.', 'about-title': 'About Me', 'about-summary': "Martin Simonson was born in Gothenburg, Sweden, and grew up on the shores of Idefjorden, on the Norwegian border, where his family has been devoted to forestry for generations. As a child, he explored the nature of the area, played role-playing games and read a substantial amount of fantasy. Later, in high school, he fell in love with English literature and the Spanish language, both of which were to become life-long passions.", 'about-full-p1': "After high school he left for northern Spain to improve his Spanish. Returning to Sweden six months later, he began studying psychology and social anthropology at the University of Gothenburg before he decided that literary fiction was more in his line. This prompted him to take a year-long course in creative writing at Fridhems Folkhögskola.", 'about-full-p2': "In 1997, the main passions in his life converged when he settled permanently in northern Spain, a place with spectacular, varied nature. Academically, English and North American literature remained his main focus, so he signed up for a B.A. in English language and literature. This was followed up by a doctorate in literary studies, translation and linguistics, that culminated with a Ph.D. on the interaction of different narrative genres in J.R.R. Tolkien’s The Lord of the Rings. During this time, he had two wonderful daughters, Lucía and Gabriela. Since 2006, he teaches English literature and speculative fiction at the University of the Basque Country.", 'about-full-p3': "This job allowed him to buy and fix up an old stone house in the country, where he now lives with his partner Laura, surrounded by mountains, woods and animals such as his dog Terra, a horse named Trueno, a dwarf donkey by the name of Antolín, and a tiny cat called Spiritus. The house and its surroundings in Valdegovía quickly became a vital point of reference in his life, a place to read and think in peace and nurture his interest in nature. It is also the place where he has written, translated and edited most of his books.", 'about-full-p4': "Apart from various Young-Adult fantasy novels, Martin has created works of science fiction, thrillers and short stories, and he has written, introduced and edited a number of essays and anthologies on fantasy, science fiction, Western American literature and Gothic horror. He is the Spanish translator of many posthumously published works by J.R.R. Tolkien, and he also revised the official translations of The Silmarillion, Unfinished Tales, The Hobbit and The Fellowship of the Ring for Minotauro, Tolkien’s Spanish publisher. Apart from these books, he has translated around thirty novels, plays, essays and graphic novels from English, Swedish and Norwegian into Spanish. In literature, as in life, Martin’s main interest lies in exploring the borderland between the real world and the virtual universes in which we all dwell these days. He sees art, nature, spirituality and creativity as crucial factors in this endeavor.", 'read-more': 'Read More &rarr;', 'read-less': 'Read Less &larr;', 'books-title': 'Books', 'category-fiction': 'Fiction', 'category-essays': 'Essays', 'category-anthologies': 'Anthologies and critical editions', 'category-translations': 'Translations', 'modal-synopsis': 'Synopsis', 'modal-abstract': 'Abstract', 'modal-buy-now': 'Buy Now', 'modal-available-in': 'Available in: ', 'modal-year': 'Year: ', 'talks-title': 'Talks & Interviews', 'news-title': 'Latest News Posts', 'contact-title': 'Get In Touch', 'contact-p': "Have a question or want to work together? Feel free to reach out. I'd love to hear from you.", 'footer-copy': '&copy; 2025 Martin Simonson. All rights reserved.', 'expand-all-btn': 'Expand All','collapse-all-btn': 'Collapse All','contact-label-email': 'Your Email','contact-label-name': 'Your Name','contact-label-message': 'Message','contact-button-submit': 'Send Message'},
            es: { 'nav-about': 'Sobre mí', 'nav-books': 'Libros', 'nav-talks': 'Charlas', 'nav-news': 'Noticias', 'nav-contact': 'Contacto', 'hero-subtitle': 'Escritor, conferenciante, académico y traductor que explora la intersección entre la cultura, naturaleza y realidad virtual.', 'about-title': 'Sobre Mí', 'about-summary': "Martin Simonson nació en Gotemburgo, Suecia, y creció a orillas del Idefjorden, en la frontera con Noruega, donde su familia se ha dedicado a la silvicultura durante generaciones. De niño, exploró la naturaleza de la zona, jugó a juegos de rol y leyó una cantidad sustancial de fantasía. Más tarde, en el instituto, se enamoró de la literatura inglesa y de la lengua española, que se convertirían en pasiones para toda la vida.", 'about-full-p1': "Después del bachillerato se marchó al norte de España para mejorar su español. Seis meses más tarde, a su regreso a Suecia, empezó a estudiar psicología y antropología social en la Universidad de Gotemburgo, antes de decidir que la ficción literaria le interesaba más. Esto le llevó a realizar un curso de un año de escritura creativa en la Fridhems Folkhögskola.", 'about-full-p2': "En 1997, las principales pasiones de su vida convergieron al establecerse definitivamente en el norte de España, un lugar con una naturaleza espectacular y variada. Académicamente, la literatura inglesa y norteamericana siguió siendo su principal centro de interés, por lo que se matriculó en la licenciatura de filología inglesa. A continuación, realizó un doctorado en estudios literarios, traducción y lingüística, que culminó con una tesis doctoral sobre la interacción de diferentes géneros narrativos en El Señor de los Anillos de J.R.R. Tolkien. Durante este tiempo, tuvo dos maravillosas hijas, Lucía y Gabriela. Desde 2006, es profesor de literatura inglesa y ficción especulativa en la Universidad del País Vasco.", 'about-full-p3': "Este trabajo le permitió comprar y arreglar una vieja casa de piedra en el campo, donde ahora vive con su compañera Laura, rodeado de montañas, bosques y animales como su perra Terra, un caballo llamado Trueno, un burro enano de nombre Antolín y una gata diminuta llamada Spiritus. La casa y su entorno en Valdegovía se convirtieron rápidamente en un punto de referencia vital en su vida, un lugar donde leer y pensar en paz y cultivar su interés por la naturaleza. Es también el lugar donde ha escrito, traducido y editado la mayoría de sus libros.", 'about-full-p4': "Además de varias novelas de fantasía para jóvenes, Martin ha creado obras de ciencia ficción, thrillers y relatos cortos, y ha escrito, introducido y editado diversos ensayos y antologías sobre fantasía, ciencia ficción, literatura del oeste americano y terror gótico. Es el traductor al español de muchas obras póstumas de J.R.R. Tolkien, y también revisó las traducciones oficiales de El Silmarillion, los Cuentos Inconclusos, El Hobbit y La Comunidad del Anillo para Minotauro, la editorial de Tolkien en español. Aparte de estos libros, ha traducido una treintena de novelas, obras de teatro, ensayos y novelas gráficas del inglés, el sueco y el noruego al español. En la literatura, como en la vida, el principal interés de Martin reside en explorar la frontera entre el mundo real y los universos virtuales en los que todos habitamos hoy en día. Considera que el arte, la naturaleza, la espiritualidad y la creatividad son factores cruciales en este empeño.", 'read-more': 'Leer más &rarr;', 'read-less': 'Leer menos &larr;', 'books-title': 'Libros', 'category-fiction': 'Ficción', 'category-essays': 'Ensayos', 'category-anthologies': 'Antologías y ediciones críticas', 'category-translations': 'Traducciones', 'modal-synopsis': 'Sinopsis', 'modal-abstract': 'Resumen', 'modal-buy-now': 'Comprar Ahora', 'modal-available-in': 'Disponible en: ', 'modal-year': 'Año: ', 'talks-title': 'Charlas y Entrevistas', 'news-title': 'Últimas Noticias', 'contact-title': 'Ponte en Contacto', 'contact-p': '¿Tienes alguna pregunta o quieres que trabajemos juntos? No dudes en contactarme. Me encantaría saber de ti.', 'footer-copy': '&copy; 2025 Martin Simonson. Todos los derechos reservados.', 'expand-all-btn': 'Expandir Todo', 'collapse-all-btn': 'Contraer Todo','contact-label-email': 'Tu Email','contact-label-name': 'Tu Nombre','contact-label-message': 'Mensaje','contact-button-submit': 'Enviar Mensaje'}
            };

        const setLanguage = (lang) => {
            // 1. Instantly update all simple text elements
            const elements = translations[lang];
            for (const key in elements) {
                const element = document.getElementById(key);
                if (element) {
                    element.innerHTML = elements[key];
                }
            }

            // 2. Save the new language choice
            localStorage.setItem('language', lang);

            // 3. Update the button styles
            updateLangButtons(lang);
            updateReadMoreButton(lang);

            // 4. Re-populate all dynamic sections.
            // We add a tiny delay (0 milliseconds) to ensure the browser
            // has time to process the simple text changes before we
            // rebuild the complex book grid. This forces it to update correctly.
            setTimeout(() => {
                if (typeof populateBooks === 'function') populateBooks(lang);
                if (typeof populateTalks === 'function') populateTalks(lang);
                if (typeof populateNews === 'function') populateNews(lang);
            }, 0);
        };

        const updateLangButtons = (lang) => {
              // Desktop buttons
            document.getElementById('lang-es').classList.toggle('lang-active', lang === 'es');
            document.getElementById('lang-en').classList.toggle('lang-active', lang !== 'es');
            // Mobile buttons
            document.getElementById('lang-es-mobile').classList.toggle('lang-active', lang === 'es');
            document.getElementById('lang-en-mobile').classList.toggle('lang-active', lang !== 'es');

        };
        
        const updateReadMoreButton = (lang) => {
            const readMoreBtn = document.getElementById('read-more-btn');
            if (readMoreBtn) {
                readMoreBtn.innerHTML = translations[lang]['read-more'];
            }   
            
        };

        // Desktop listeners
        document.getElementById('lang-en').addEventListener('click', () => setLanguage('en'));
        document.getElementById('lang-es').addEventListener('click', () => setLanguage('es'));
        // Mobile listeners
        document.getElementById('lang-en-mobile').addEventListener('click', () => {
            setLanguage('en');
            document.getElementById('mobile-menu').classList.add('hidden'); // Close menu on selection
        });
        document.getElementById('lang-es-mobile').addEventListener('click', () => {
            setLanguage('es');
            document.getElementById('mobile-menu').classList.add('hidden'); // Close menu on selection
        });

        const savedLang = localStorage.getItem('language') || 'en';
        setLanguage(savedLang);

    // New logic for the 'About Me' modal
        const aboutModal = document.getElementById('about-modal');
        const aboutModalContent = document.getElementById('about-modal-content');
        const aboutModalClose = document.getElementById('about-modal-close');
        const readMoreBtn = document.getElementById('read-more-btn');

        const openAboutModal = () => {
            document.body.classList.add('modal-open');
            aboutModal.classList.remove('hidden');
            setTimeout(() => { // Small delay to allow transition
                aboutModal.classList.add('opacity-100');
                if(aboutModalContent) aboutModalContent.classList.remove('scale-95');
            }, 10);
        };

        const closeAboutModal = () => {
            if(aboutModalContent) aboutModalContent.classList.add('scale-95');
            aboutModal.classList.remove('opacity-100');
            setTimeout(() => {
                aboutModal.classList.add('hidden');
                document.body.classList.remove('modal-open');
            }, 300); // Match transition duration
        };

        readMoreBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openAboutModal();
        });

        aboutModalClose.addEventListener('click', closeAboutModal);
        aboutModal.addEventListener('click', (e) => {
            if (e.target === aboutModal) {
                closeAboutModal();
            }
        });

        const bookModal = document.getElementById('book-modal');
        const modalContent = document.getElementById('modal-content');
        const modalClose = document.getElementById('modal-close');
        
        const openModal = (bookData) => {
            const lang = localStorage.getItem('language') || 'en';
            const modalImage = document.getElementById('modal-img');
            const title = (lang === 'es' ? bookData.titleEs : bookData.titleEn) || 'Untitled';

    // Set a fixed size for the placeholder
             // --- NEW SIMPLIFIED LOGIC ---
    // Start with the final, correct URL from the grid thumbnail.
            let modalImgSrc = bookData.finalSrc;

            // The URL is already perfect, we just replace the thumbnail dimensions (w_200,h_300) 
            // with the larger modal dimensions (w_250,h_375).
            if (modalImgSrc) {
                modalImgSrc = modalImgSrc.replace('w_200,h_300', 'w_250,h_375');
            }
    
    // Set the image source. Done.
            modalImage.src = modalImgSrc;
    
    // Populate the rest of the modal content
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-available-label').textContent = translations[lang]['modal-available-in'];
            document.getElementById('modal-available-langs').textContent = bookData.availableLangs;
            document.getElementById('modal-year-label').textContent = translations[lang]['modal-year'];
            document.getElementById('modal-year').textContent = bookData.year;
            document.getElementById('modal-desc').textContent = lang === 'es' ? bookData.descEs : bookData.descEn;
            const modalLink = document.getElementById('modal-link');
            modalLink.href = bookData.link;
            modalLink.textContent = translations[lang]['modal-buy-now'];
            document.getElementById('modal-desc-title').textContent = bookData.type === 'essay' ? translations[lang]['modal-abstract'] : translations[lang]['modal-synopsis'];
    
    // Show the modal
            document.body.classList.add('modal-open');
            bookModal.classList.remove('hidden');
            setTimeout(() => {
                 bookModal.classList.add('opacity-100');
                modalContent.classList.remove('scale-95');
            }, 10);
        };

        const closeModal = () => {
            modalContent.classList.add('scale-95');
            bookModal.classList.remove('opacity-100');
            setTimeout(() => {
                bookModal.classList.add('hidden');
                document.body.classList.remove('modal-open');
            }, 300);
        };

        function initializeModalEventListeners() {
            const bookItems = document.querySelectorAll('.book-item');
            bookItems.forEach(item => {
                if (item.hasAttribute('data-listener-attached')) return;
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    const bookData = { type: item.dataset.type, imgSrc: item.dataset.imgSrc, titleEn: item.dataset.titleEn, titleEs: item.dataset.titleEs, descEn: item.dataset.descEn, descEs: item.dataset.descEs, link: item.dataset.link, availableLangs: item.dataset.availableLangs, year: item.dataset.year, finalSrc: item.dataset.finalSrc };
                    openModal(bookData);
                });
                item.setAttribute('data-listener-attached', 'true');
            });
        }

        modalClose.addEventListener('click', closeModal);
        bookModal.addEventListener('click', (e) => { if (e.target === bookModal) closeModal(); });

        const accordionToggles = document.querySelectorAll('.accordion-toggle');
        const expandAllBtn = document.getElementById('expand-all-btn');
        const collapseAllBtn = document.getElementById('collapse-all-btn');

        // Function to check accordion states and enable/disable control buttons
        const updateControlButtonsState = () => {
            const openAccordions = Array.from(accordionToggles).filter(toggle => 
                !toggle.nextElementSibling.classList.contains('hidden')
            ).length;

            const totalAccordions = accordionToggles.length;

            // Disable "Expand All" if all are open, enable otherwise
            expandAllBtn.disabled = openAccordions === totalAccordions;
            // Disable "Collapse All" if all are closed, enable otherwise
            collapseAllBtn.disabled = openAccordions === 0;
        };

        // Main logic for individual accordion clicks
        accordionToggles.forEach(toggle => {
            toggle.addEventListener('click', () => {
                toggle.nextElementSibling.classList.toggle('hidden');
                toggle.querySelector('svg').classList.toggle('rotate-180');
            
                // Update button states after every click
                updateControlButtonsState();
            });
        });

        // Event listener for the "Expand All" button
        expandAllBtn.addEventListener('click', () => {
            accordionToggles.forEach(toggle => {
                toggle.nextElementSibling.classList.remove('hidden');

                // Ensure the arrow is rotated correctly
                toggle.querySelector('svg').classList.add('rotate-180');
            });
            // Update button states after expanding all
            updateControlButtonsState();
        });

        // Event listener for the "Collapse All" button
        collapseAllBtn.addEventListener('click', () => {
            accordionToggles.forEach(toggle => {
                toggle.nextElementSibling.classList.add('hidden');
            
                // Ensure the arrow is returned to normal
                toggle.querySelector('svg').classList.remove('rotate-180');
            });
            // Update button states after collapsing all
            updateControlButtonsState();
        });

        // Set the initial state of the buttons when the page loads
        updateControlButtonsState();

            //This is the menu button fucntionality JS for phones

        // --- Hamburger Menu Logic ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuCloseButton = document.getElementById('mobile-menu-close-button');
        const mobileMenuLinks = document.querySelectorAll('#mobile-menu a');

        // Open menu
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('hidden');
        });

        // Close menu via X button
        mobileMenuCloseButton.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });

        // Close menu when a link is clicked
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });
        // --- News Modal Logic ---
        const newsModal = document.getElementById('news-modal');
        const newsModalContent = document.getElementById('news-modal-content');
        const newsModalClose = document.getElementById('news-modal-close');

        function openNewsModal(data) {
            const lang = localStorage.getItem('language') || 'en';

            // Populate existing modal elements
            document.getElementById('news-modal-img').src = data.imgSrc;
            document.getElementById('news-modal-date').textContent = lang === 'es' ? data.dateEs : data.dateEn;
            document.getElementById('news-modal-title').textContent = lang === 'es' ? data.titleEs : data.titleEn;
            document.getElementById('news-modal-desc').innerHTML = lang === 'es' ? data.descriptionEs : data.descriptionEn;
            document.getElementById('news-modal-img').style.display = data.imgSrc ? 'block' : 'none';

            // --- NEW: Handle the link button ---
            const modalLink = document.getElementById('news-modal-link');
            if (data.link) {
                modalLink.href = data.link;
                modalLink.textContent = lang === 'es' ? data.linkTextEs : data.linkTextEn;
                modalLink.parentElement.style.display = 'block'; // Show the button's container
            } else {
                modalLink.parentElement.style.display = 'none'; // Hide the button if there's no link
            }
            // --- END NEW ---

            // Show the modal with animation
            document.body.classList.add('modal-open');
            newsModal.classList.remove('hidden');
            setTimeout(() => {
                newsModal.classList.add('opacity-100');
                newsModalContent.classList.remove('scale-95');
            }, 10);
        }

        function closeNewsModal() {
            newsModalContent.classList.add('scale-95');
            newsModal.classList.remove('opacity-100');
            setTimeout(() => {
                newsModal.classList.add('hidden');
                document.body.classList.remove('modal-open');
            }, 300);
        }

        newsModalClose.addEventListener('click', closeNewsModal);
        newsModal.addEventListener('click', (e) => {
        if (e.target === newsModal) {
            closeNewsModal();
        }
    });

// Event delegation to listen for clicks on "Read More" links
    document.querySelector('#news').addEventListener('click', (e) => {
        if (e.target.classList.contains('news-item-link')) {
            e.preventDefault();
            const link = e.target;
            // Gather all language data from attributes
            const newsData = {
                titleEn: link.dataset.titleEn,
                titleEs: link.dataset.titleEs,
                dateEn: link.dataset.dateEn,
                dateEs: link.dataset.dateEs,
                imgSrc: link.dataset.imgSrc,
                descriptionEn: link.dataset.descriptionEn,
                descriptionEs: link.dataset.descriptionEs,
                link: link.dataset.link,
                linkTextEn: link.dataset.linkTextEn, 
                linkTextEs: link.dataset.linkTextEs  
            };
            openNewsModal(newsData);
        }
    });

    // --- Combined GSAP and Dynamic Background Script --- 
        // --- GSAP Animated Scroll Transition Logic ---
        gsap.registerPlugin(ScrollTrigger);
        const sections = document.querySelectorAll('.animated-section');
        sections.forEach(section => {
            const content = section.querySelector('.section-content');
            gsap.fromTo(content, 
                { opacity: 0, scale: 0.9, y: 50 }, 
                { 
                    opacity: 1, scale: 1, y: 0, duration: 1,
                    scrollTrigger: {
                        trigger: section,
                        start: 'top 80%',
                        end: 'top 30%',
                        scrub: 1,
                    }
                }
            );
        });
    </script>
</body>
</html>